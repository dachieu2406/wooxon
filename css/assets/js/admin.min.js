var file_frame;!function(e){"use strict";e(document).ready(function(){function t(t,a){for(var i=t,n=a,r=i.attr("class").split(" "),o=0;o<r.length;o+=1)if(r[o].indexOf("menu-item-depth-")>=0){var l=r[o].split("menu-item-depth-"),s=i.attr("id");l=parseInt(l[1])+n,s=s.replace("menu-item-",""),0==l?(i.find(".edit-menu-item-level1-"+s).hide().find("select, input, textarea").each(function(){e(this).removeAttr("name")}),i.find(".edit-menu-item-level0-"+s).show().find('select, input[type="text"], textarea').each(function(){e(this).val()?e(this).attr("name",e(this).attr("data-name")):e(this).removeAttr("name")}),i.find(".edit-menu-item-level0-"+s).find('input[type="checkbox"]').each(function(){e(this).is(":checked")?e(this).attr("name",e(this).attr("data-name")):e(this).removeAttr("name")}),i.find(".edit-menu-item-level01-"+s).show().find('select, input[type="text"], textarea').each(function(){e(this).val()?e(this).attr("name",e(this).attr("data-name")):e(this).removeAttr("name")}),i.find(".edit-menu-item-level01-"+s).find('input[type="checkbox"]').each(function(){e(this).is(":checked")?e(this).attr("name",e(this).attr("data-name")):e(this).removeAttr("name")})):1==l?(i.find(".edit-menu-item-level0-"+s).hide().find("select, input, textarea").each(function(){e(this).removeAttr("name")}),i.find(".edit-menu-item-level1-"+s).show().find('select, input[type="text"], textarea').each(function(){e(this).val()?e(this).attr("name",e(this).attr("data-name")):e(this).removeAttr("name")}),i.find(".edit-menu-item-level1-"+s).find('input[type="checkbox"]').each(function(){e(this).is(":checked")?e(this).attr("name",e(this).attr("data-name")):e(this).removeAttr("name")}),i.find(".edit-menu-item-level01-"+s).show().find('select, input[type="text"], textarea').each(function(){e(this).val()?e(this).attr("name",e(this).attr("data-name")):e(this).removeAttr("name")}),i.find(".edit-menu-item-level01-"+s).find('input[type="checkbox"]').each(function(){e(this).is(":checked")?e(this).attr("name",e(this).attr("data-name")):e(this).removeAttr("name")})):(i.find(".edit-menu-item-level0-"+s).hide().find("select, input, textarea").each(function(){e(this).removeAttr("name")}),i.find(".edit-menu-item-level1-"+s).hide().find("select, input, textarea").each(function(){e(this).removeAttr("name")}),i.find(".edit-menu-item-level01-"+s).hide().find("select, input, textarea").each(function(){e(this).removeAttr("name")}))}}e("#wooxon_theme_options-section_documentation_row a").attr("target","_blank"),e(document).on("click",".button_upload_image",function(t){if(t.preventDefault(),file_frame)file_frame.open();else{var a=e(this).attr("data-id");(file_frame=wp.media.frames.downloadable_file=wp.media({title:"Choose an image",button:{text:"Use image"},multiple:!1})).on("select",function(){var t=file_frame.state().get("selection").first().toJSON();e("#"+a).val(t.url),e("#"+a).attr("data-name")&&e("#"+a).attr("name",jQuery("#"+a).attr("data-name"))}),file_frame.open()}}).on("click",".button_upload_gallery",function(t){var a=e(this),i=e("#"+a.data("id")),n=a.closest(".gallery-field").find(".gallery-preview");t.preventDefault(),file_frame?file_frame.open():((file_frame=wp.media.frames.product_gallery=wp.media({title:"Add Images to Gallery",button:{text:"Add to gallery"},states:[new wp.media.controller.Library({title:"Add Images to Gallery",filterable:"all",multiple:!0})]})).on("select",function(){var e=file_frame.state().get("selection"),t=i.val();e.map(function(e){if((e=e.toJSON()).id){t=t?t+","+e.id:e.id;var a=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;n.append('<div class="wooxon-image" data-attachment_id="'+e.id+'"><img src="'+a+'" /><a href="#" class="delete" title="Delete image">Delete</a></div>')}}),i.val(t)}),file_frame.open())}).on("click",".wooxon-image .delete",function(t){t.preventDefault(),e(this).closest("div.wooxon-image").remove();var a=e(this).closest(".gallery-field"),i=e("#"+a.find(".button").data("id")),n="";a.find("div.wooxon-image").css("cursor","default").each(function(){var t=e(this).attr("data-attachment_id");n=n+t+","}),i.val(n)}).on("click",".button_remove_image",function(t){var a=e(this).attr("data-id");return e("#"+a).val(""),!1}),e.fn.sortable&&e(".box-option .gallery-field .gallery-preview").sortable({items:"div.wooxon-image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wooxon-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")},update:function(t,a){var i=e(t.target),n=e("#"+i.closest(".gallery-field").find(".button").data("id")),r="";i.find("div.wooxon-image").css("cursor","default").each(function(){var t=e(this).attr("data-attachment_id");r=r+t+","}),n.val(r)}}),e(".label-image-select input").on("change",function(){e(this).parent().parent().find(".label-image-select").removeClass("selected"),e(this).is(":checked")&&e(this).closest(".label-image-select").addClass("selected")}),e(document).on("change",'.menu-item select, .menu-item textarea, .menu-item input[type="text"]',function(){var t=e(this);t.val()?t.attr("name",e(this).attr("data-name")):t.removeAttr("name")}),e(document).on("change",'.menu-item input[type="checkbox"]',function(){var t=e(this);t.is(":checked")?t.attr("name",e(this).attr("data-name")):t.removeAttr("name")}),e("#update-nav-menu").on("click",function(a){if(a.target&&a.target.className&&-1!=a.target.className.indexOf("item-delete")){var i=a.target,n=parseInt(i.id.replace("delete-",""),10);e("#menu-item-"+n).childMenuItems().each(function(){t(e(this),-1)})}}),e("#menu-to-edit").on("sortstop",function(a,i){var n=i.item;setTimeout(function(){t(n,0);n.childMenuItems().each(function(){t(e(this),0)})},200)});jQuery(".sidebar-piko_custom_sidebar").find(".sidebar-name button").after('<a class="delete-sidebar handlediv" href="javascript:void(0)" title="Delete Sidebar"><span class="dashicons dashicons-trash"></span></a>'),e(document).on("click",".delete-sidebar",function(){if(confirm("Are you sure?")){var e=jQuery(this).parent().parent(),t={action:"wooxon_delete_sidebar",piko_sidebar_name:jQuery(this).parent().find("h2").text()};e.hide(),jQuery.ajax({url:ajaxurl,data:t,success:function(t){console.log(t),e.remove()},error:function(t){alert("Error while deleting sidebar"),e.show()}})}});var a=jQuery("#piko_add_sidebar_form"),i=a.clone();a.remove(),jQuery("#widgets-right").append('<div style="clear:both;"></div>'),jQuery("#widgets-right").append(i),i.submit(function(e){e.preventDefault();var t={action:"wooxon_add_sidebar",_wpnonce_piko_widgets:jQuery("#_wpnonce_piko_widgets").val(),piko_sidebar_name:jQuery("#piko_sidebar_name").val()};jQuery.ajax({url:ajaxurl,data:t,success:function(e){console.log(e),window.location.reload(!0)},error:function(e){console.log("error")}})})})}(jQuery);